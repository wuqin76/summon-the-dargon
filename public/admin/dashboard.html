<!DOCTYPE html><html lang="zh-CN"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>æ•°æ®ç®¡ç†åå°</title>    <style>        * { margin: 0; padding: 0; box-sizing: border-box; }        body { font-family: 'Microsoft YaHei', sans-serif; background: #f5f5f5; }        .login-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; z-index: 9999; }        .login-box { background: white; padding: 40px; border-radius: 16px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); width: 90%; max-width: 400px; }        .login-box h2 { text-align: center; color: #333; margin-bottom: 30px; }        .login-box input { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; margin-bottom: 15px; }        .login-box button { width: 100%; padding: 14px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; font-weight: 600; }        .main-content { display: none; padding: 20px; max-width: 1400px; margin: 0 auto; }        .header { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 20px; }        .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }        .stat-card h3 { color: #666; font-size: 13px; margin-bottom: 10px; }        .stat-card .value { font-size: 24px; font-weight: bold; color: #667eea; }        .data-section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow-x: auto; }        table { width: 100%; border-collapse: collapse; min-width: 800px; }        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #eee; font-size: 13px; }        th { background: #f8f9fa; font-weight: 600; color: #333; }        .btn-refresh { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; }        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }        .tab { padding: 10px 20px; background: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }        .tab.active { background: #667eea; color: white; }        .loading { text-align: center; padding: 40px; color: #666; }    </style></head><body>    <div class="login-overlay" id="loginOverlay">        <div class="login-box">            <h2>ğŸ¯ ç®¡ç†åå°</h2>            <input type="password" id="passwordInput" placeholder="è¾“å…¥å¯†ç ï¼š1234">            <button onclick="login()">ç™»å½•</button>            <div id="loginError" style="color: red; margin-top: 10px; display: none;"></div>        </div>    </div>    <div class="main-content" id="mainContent">        <div class="header">            <h1>ğŸ“Š Dragon Spin æ•°æ®ç®¡ç†</h1>            <button class="btn-refresh" onclick="loadAllData()">ğŸ”„ åˆ·æ–°</button>        </div>        <div class="stats-grid">            <div class="stat-card"><h3>æ€»ç”¨æˆ·æ•°</h3><div class="value" id="totalUsers">-</div></div>            <div class="stat-card"><h3>æ€»æ”¯ä»˜</h3><div class="value" id="totalRevenue">-</div></div>            <div class="stat-card"><h3>ä»Šæ—¥æ”¶å…¥</h3><div class="value" id="todayRevenue">-</div></div>            <div class="stat-card"><h3>æ€»é‚€è¯·</h3><div class="value" id="totalInvites">-</div></div>            <div class="stat-card"><h3>æ¸¸æˆæ¬¡æ•°</h3><div class="value" id="totalGames">-</div></div>            <div class="stat-card"><h3>æŠ½å¥–æ¬¡æ•°</h3><div class="value" id="totalSpins">-</div></div>        </div>        <div class="tabs">            <button class="tab active" onclick="showTab('users')">ğŸ‘¥ ç”¨æˆ·</button>            <button class="tab" onclick="showTab('invites')">ğŸ”— é‚€è¯·</button>            <button class="tab" onclick="showTab('payments')">ğŸ’° è´­ä¹°</button>            <button class="tab" onclick="showTab('games')">ğŸ® æ¸¸æˆ</button>            <button class="tab" onclick="showTab('spins')">ğŸ° æŠ½å¥–</button>            <button class="tab" onclick="showTab('payouts')">ğŸ’¸ æç°</button>        </div>        <div class="data-section" id="dataSection"><div class="loading">åŠ è½½ä¸­...</div></div>    </div>    <script>        let currentPassword = '';        let currentTab = 'users';        function login() {            const password = document.getElementById('passwordInput').value;            if (password === '1234') {                currentPassword = password;                document.getElementById('loginOverlay').style.display = 'none';                document.getElementById('mainContent').style.display = 'block';                loadAllData();            } else {                document.getElementById('loginError').textContent = 'å¯†ç é”™è¯¯ï¼';                document.getElementById('loginError').style.display = 'block';            }        }        document.getElementById('passwordInput').addEventListener('keypress', (e) => { if (e.key === 'Enter') login(); });        async function fetchWithPassword(url) {            const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ password: currentPassword }) });            if (!response.ok) throw new Error('è¯·æ±‚å¤±è´¥');            return response.json();        }        async function loadAllData() {            try { await loadStats(); await loadTabData(currentTab); } catch (error) { console.error('åŠ è½½å¤±è´¥:', error); }        }        async function loadStats() {            try {                const data = await fetchWithPassword('/api/admin/stats-simple');                document.getElementById('totalUsers').textContent = data.total_users || 0;                document.getElementById('totalRevenue').textContent = 'â‚¹' + (data.total_revenue || 0);                document.getElementById('todayRevenue').textContent = 'â‚¹' + (data.today_revenue || 0);                document.getElementById('totalInvites').textContent = data.total_invites || 0;                document.getElementById('totalGames').textContent = data.total_games || 0;                document.getElementById('totalSpins').textContent = data.total_spins || 0;            } catch (error) { console.error('ç»Ÿè®¡å¤±è´¥:', error); }        }        async function loadTabData(tab) {            currentTab = tab;            document.getElementById('dataSection').innerHTML = '<div class="loading">åŠ è½½ä¸­...</div>';            try {                const data = await fetchWithPassword('/api/admin/' + tab + '-simple');                renderTable(tab, data);            } catch (error) {                document.getElementById('dataSection').innerHTML = '<div style="padding:20px;color:red;">åŠ è½½å¤±è´¥ï¼š' + error.message + '</div>';            }        }        function renderTable(tab, data) {            if (!data || data.length === 0) {                document.getElementById('dataSection').innerHTML = '<p style="text-align:center;padding:40px;color:#999;">æš‚æ— æ•°æ®</p>';                return;            }            const headers = {                'users': ['ID', 'ç”¨æˆ·å', 'TG ID', 'ä½™é¢', 'æŠ½å¥–', 'é‚€è¯·', 'ä»˜è´¹', 'æ³¨å†Œæ—¶é—´'],                'invites': ['é‚€è¯·äºº', 'TG ID', 'è¢«é‚€è¯·äºº', 'TG ID', 'é‚€è¯·ç ', 'çŠ¶æ€', 'æ—¶é—´'],                'payments': ['ID', 'ç”¨æˆ·', 'TG ID', 'é‡‘é¢', 'çŠ¶æ€', 'å·²ç”¨', 'æ—¶é—´'],                'games': ['ID', 'ç”¨æˆ·', 'TG ID', 'æ¨¡å¼', 'å®Œæˆ', 'æ—¶é—´'],                'spins': ['ID', 'ç”¨æˆ·', 'TG ID', 'å¥–é‡‘', 'çŠ¶æ€', 'æ—¶é—´'],                'payouts': ['ID', 'ç”¨æˆ·', 'TG ID', 'é‡‘é¢', 'çŠ¶æ€', 'æ—¶é—´']            };            let html = '<table><thead><tr>';            headers[tab].forEach(h => { html += '<th>' + h + '</th>'; });            html += '</tr></thead><tbody>';            data.forEach(row => {                html += '<tr>';                if (tab === 'users') {                    html += '<td>' + row.id + '</td><td>' + (row.username || row.first_name || '-') + '</td><td>' + row.telegram_id + '</td><td>â‚¹' + (row.balance || 0) + '</td><td>' + (row.available_spins || 0) + '</td><td>' + (row.total_invited || 0) + '</td><td>â‚¹' + (row.total_paid || 0) + '</td><td>' + new Date(row.created_at).toLocaleString('zh-CN') + '</td>';                } else if (tab === 'invites') {                    html += '<td>' + (row.inviter_name || '-') + '</td><td>' + row.inviter_telegram_id + '</td><td>' + (row.invitee_name || '-') + '</td><td>' + row.invitee_telegram_id + '</td><td>' + row.invite_code + '</td><td>' + row.status + '</td><td>' + new Date(row.created_at).toLocaleString('zh-CN') + '</td>';                } else if (tab === 'payments') {                    html += '<td>' + row.id + '</td><td>' + (row.username || row.first_name || '-') + '</td><td>' + row.telegram_id + '</td><td>â‚¹' + row.amount + '</td><td>' + row.status + '</td><td>' + (row.used ? 'æ˜¯' : 'å¦') + '</td><td>' + new Date(row.created_at).toLocaleString('zh-CN') + '</td>';                } else if (tab === 'games') {                    html += '<td>' + row.id + '</td><td>' + (row.username || row.first_name || '-') + '</td><td>' + row.telegram_id + '</td><td>' + row.game_mode + '</td><td>' + (row.completed ? 'æ˜¯' : 'å¦') + '</td><td>' + new Date(row.created_at).toLocaleString('zh-CN') + '</td>';                } else if (tab === 'spins') {                    html += '<td>' + row.id + '</td><td>' + (row.username || row.first_name || '-') + '</td><td>' + row.telegram_id + '</td><td>â‚¹' + row.prize_amount + '</td><td>' + row.status + '</td><td>' + new Date(row.created_at).toLocaleString('zh-CN') + '</td>';                } else if (tab === 'payouts') {                    html += '<td>' + row.id + '</td><td>' + (row.username || row.first_name || '-') + '</td><td>' + row.telegram_id + '</td><td>â‚¹' + row.amount + '</td><td>' + row.status + '</td><td>' + new Date(row.created_at).toLocaleString('zh-CN') + '</td>';                }                html += '</tr>';            });            html += '</tbody></table>';            document.getElementById('dataSection').innerHTML = html;        }        function showTab(tab) {            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));            event.target.classList.add('active');            loadTabData(tab);        }    </script></body></html>